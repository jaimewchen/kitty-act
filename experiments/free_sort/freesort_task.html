<!DOCTYPE html>
<html>
    <head>
      <script src="jspsych-6.3.1/jspsych.js"></script> 
      <script src="jspsych-6.3.1/plugins/jspsych-preload.js"></script>
      <script src="jspsych-6.3.1/plugins/jspsych-free-sort.js"></script>
      <script src="jspsych-6.3.1/plugins/jspsych-fullscreen.js"></script>
      <link href="jspsych-6.3.1/css/jspsych.css" rel="stylesheet" type="text/css">
    </head>
    <body>
    </body>
    <script>
        var timeline = []

        var preload = {
          type: 'preload',
          auto_preload: true,
          continue_after_error: true,
          max_load_time: 15000
        };
        timeline.push(preload);

        var enter_fullscreen = {
          type: 'fullscreen',
          fullscreen_mode: true
        };
        timeline.push(enter_fullscreen);

        stims_names = [
            'stims_air', 
            'stims_ani', 
            'stims_boa', 
            'stims_fru', 
            'stims_mus', 
            'stims_pla',
            'stims_sea',
            'stims_spo',
            'stims_sta',
            'stims_veg',
            'stims_veh',
        ]

        // shuffled stims array
        var stims = jsPsych.randomization.repeat(stims_names, 1)

        for (let i = 0, len = stims.length, text = ""; i < len; i++) { 
            var stims_list = [
                stims[i]+'/bas1.jpg',
                stims[i]+'/bas2.jpg',
                stims[i]+'/bas3.jpg',
                stims[i]+'/bas4.jpg',
                stims[i]+'/sub1.jpg',
                stims[i]+'/sub2.jpg',
                stims[i]+'/sub3.jpg',
                stims[i]+'/sub4.jpg',
                stims[i]+'/sub5.jpg',
                stims[i]+'/sup1.jpg',
                stims[i]+'/sup2.jpg',
                stims[i]+'/sup3.jpg',
                stims[i]+'/sup4.jpg',
                stims[i]+'/sup5.jpg',
                stims[i]+'/sup6.jpg'
            ];
            if (stims[i] == 'stims_boa' || stims[i] == 'stims_pla') {
                stims_list.push(
                    stims[i]+'/sup7.jpg',
                    stims[i]+'/sup8.jpg'
                )
            };
            var sort_trial = {
                type: 'free-sort',
                stimuli: stims_list,
                stim_width: 100,
                stim_height: 100,
                scale_factor: 1.1,
                sort_area_width: 700,
                sort_area_height: 550,
                prompt: "<p style='margin-bottom: -10px;'><b>Click and drag the images below to sort them so that similar items are close together.</b></p>"
            };
            timeline.push(sort_trial);
        };
        
        jsPsych.init({
            timeline: timeline
        })

    </script>
</html>